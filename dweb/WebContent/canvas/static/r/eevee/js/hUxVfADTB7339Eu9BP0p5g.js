(function() {var k,n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,aa={};function p(a,b){(aa[a]=aa[a]||[]).push(b);var c=n;a=a.split(".");for(var d=0;d<a.length-1&&c;d++)c=c[a[d]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=b(c[a]))}
function q(){q=function(){};if(!n.Symbol){n.Symbol=ba;var a=[],b=function(b){return function(d){a=[];d=b(d);for(var e=[],f=0,g=d.length;f<g;f++){var h;a:if(h=d[f],14>h.length)h=!1;else{for(var m=0;14>m;m++)if(h[m]!="jscomp_symbol_"[m]){h=!1;break a}h=!0}h?a.push(d[f]):e.push(d[f])}return e}};p("Object.keys",b);p("Object.getOwnPropertyNames",b);p("Object.getOwnPropertySymbols",function(c){return function(d){b.Mb=Object.getOwnPropertyNames(d);a.push.apply(c(d));return a}})}}var ca=0;
function ba(a){return"jscomp_symbol_"+a+ca++}function r(){q();n.Symbol.iterator||(n.Symbol.iterator=n.Symbol("iterator"));r=function(){}}function t(a){r();q();r();var b=a[Symbol.iterator];if(b)return b.call(a);var c=0;return{next:function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}}function u(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
function w(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function x(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function y(a,b){if(b){for(var c=n,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];b=b(e);if(b!=e){a=aa[a]||[];for(e=0;e<a.length;e++)b=a[e](b);da(c,d,{configurable:!0,writable:!0,value:b})}}}
y("WeakMap",function(a){function b(a){this.ra=(h+=Math.random()+1).toString();if(a){q();r();a=t(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){if(!x(a,f)){var b={};b[f]=g;da(a,f,{value:b})}}function d(a){return function(b){var c=a(b);if(x(b,f)&&x(b[f],f)&&b[f][f]===g)for(b=0;b<c.length;b++)if(c[b]==f){c.splice(b,1);break}return c}}function e(a){return function(b){c(b);return a(b)}}if(function(){if(!a||!Object.seal)return!1;var b=Object.seal({}),c=Object.seal({}),d=new a([[b,
2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}())return a;var f="$jscomp_hidden_"+Math.random().toString().substring(2),g={};p("Object.getOwnPropertyNames",d);p("Object.keys",d);p("Reflect.enumerate",d);p("Reflect.ownKeys",d);p("Object.freeze",e);p("Object.preventExtensions",e);p("Object.seal",e);var h=0;b.prototype.set=function(a,b){c(a);if(!x(a,f))throw Error("WeakMap key fail: "+a);a[f][this.ra]=b;return this};b.prototype.get=function(a){return x(a,
f)?a[f][this.ra]:void 0};b.prototype.has=function(a){return x(a,f)&&x(a[f],this.ra)};b.prototype.delete=function(a){return x(a,f)&&x(a[f],this.ra)?delete a[f][this.ra]:!1};return b});
y("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.J,d={next:function(){if(c){for(;c.head!=a.J;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}}};d[Symbol.iterator]=function(){return d};return d}function d(a,b){var c;c=b&&typeof b;"object"==c||"function"==c?f.has(b)?c=f.get(b):(c=""+ ++g,f.set(b,c)):c="p_"+b;var d=a.na[c];if(d&&x(a.na,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==
e.key||b===e.key)return{id:c,list:d,index:a,v:e}}return{id:c,list:d,index:-1,v:void 0}}function e(a){this.na={};this.J=b();this.size=0;if(a){a=t(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(t([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;
e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(f){return!1}}())return a;q();r();var f=new WeakMap;e.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.na[c.id]=[]);c.v?c.v.value=b:(c.v={next:this.J,previous:this.J.previous,head:this.J,key:a,value:b},c.list.push(c.v),this.J.previous.next=c.v,this.J.previous=c.v,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.v&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.na[a.id],
a.v.previous.next=a.v.next,a.v.next.previous=a.v.previous,a.v.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.na={};this.J=this.J.previous=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).v};e.prototype.get=function(a){return(a=d(this,a).v)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};
e.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});function ea(a,b){r();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}
y("Array.prototype.keys",function(a){return a?a:function(){return ea(this,function(a){return a})}});y("Array.prototype.values",function(a){return a?a:function(){return ea(this,function(a,c){return c})}});y("Object.assign",function(a){return a?a:function(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var f in e)x(e,f)&&(a[f]=e[f])}return a}});
y("Array.prototype.fill",function(a){return a?a:function(a,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});y("Array.prototype.find",function(a){return a?a:function(a,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++){var g=d[f];if(a.call(c,g,f,d)){a=g;break a}}a=void 0}return a}});function fa(){}
function z(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!a)throw Error(2>arguments.length?"invalid argument":ha.apply(fa,[].concat([b],u(d))));}function ia(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!a)throw Error(2>arguments.length?"invalid state":ha.apply(fa,[].concat([b],u(d))));}
function A(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(null==a)throw Error(2>arguments.length?"argument is null":ha.apply(fa,[].concat([b],u(d))));return a}function ha(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];var e=0;return a.replace(/\{}/g,function(){return e<c.length?c[e++]:"{}"})};function ja(){}ja.prototype.now=function(){return Date.now()};var ka=new ja;var na=new la;function la(){}k=la.prototype;k.setInterval=function(a,b){return window.setInterval(a,b)};k.clearInterval=function(a){window.clearInterval(a)};k.setTimeout=function(a,b){return window.setTimeout(a,b)};k.clearTimeout=function(a){window.clearTimeout(a)};k.requestAnimationFrame=function(a){return window.requestAnimationFrame(a)};k.cancelAnimationFrame=function(a){window.cancelAnimationFrame(a)};function oa(a){window.requestAnimationFrame(function(){window.requestAnimationFrame(a)})};function B(a){this.type=a}B.prototype.required=function(a,b){b=b[a];if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};B.prototype.optional=function(a,b){b=b[a];if(null!=b&&typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
B.prototype.ob=function(a,b){b=b[a];if(null!=b)if(Array.isArray(b))for(a=0;a<b.length;a++)this.required(String(a),b);else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var C=new B("string"),pa=new B("boolean"),D=new B("number");function qa(a){if(null==a||"object"!=typeof a)throw new TypeError("expected an object, found: "+a);return a}
function ra(a,b){a=b[a];if("string"!==typeof a)throw new TypeError('expected string value in property "experiments", found: '+JSON.stringify(a));return a}function E(a){this.type=a}E.prototype.required=function(a,b){if(null==b||typeof b!=this.type)throw new TypeError("expected "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};
E.prototype.optional=function(a,b){if(null!=b){if(typeof b!=this.type)throw new TypeError("expected optional "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b}};E.prototype.ob=function(a,b){if(Array.isArray(b)){if(0==b.length)return;for(var c=0;c<b.length;c++)this.required(a+"["+String(c)+"]",b[c])}else throw new TypeError("expected repeated "+this.type+' for property "'+a+'", found: '+JSON.stringify(b));return b};var F=new E("string");function sa(a){var b=ta;if(!b)throw new TypeError("Cannot adopt constructor "+b);if("object"!==typeof a)throw new TypeError("Cannot adopt non-object value "+a);if(null===a)throw new TypeError("Cannot adopt null value");return Object.create(b.prototype,ua(a))}function ua(a){var b=Object.create(null);Object.keys(a).forEach(function(c){b[c]={value:a[c],writable:!0,enumerable:!0,configurable:!0}});return b};function va(a){switch(a){case "USERNAME":return"USERNAME";case "EMAIL":return"EMAIL";case "FACEBOOK":return"FACEBOOK";case "GOOGLE":return"GOOGLE";default:throw new TypeError('expected CredentialsType for property "type", found: '+JSON.stringify(a));}}function wa(a){this.type=a.type;this.W=a.W}wa.prototype.getToken=function(){return this.W};function xa(a){return{type:F.required("type",va(a.type)),token:F.required("token",a.W)}}
function ya(a){this.size=a.size;this.width=a.width;this.height=a.height;this.url=a.url};function ta(a){a=void 0===a?{}:a;this.version=a.version||0;this.sizes=a.sizes||{};this.status=a.status||void 0}ta.prototype.getVersion=function(){return this.version};
(function(){var a={version:0,sizes:{50:{size:50,width:50,height:50,url:"https://static.canva.com/static/images/default_avatar_50.png"},200:{size:200,width:200,height:200,url:"https://static.canva.com/static/images/default_avatar_200.png"}}};if(!a)return null;var b=sa(a);b.sizes&&(b.sizes=Object.keys(b.sizes).reduce(function(a,d){var e=b.sizes[d];a[d]=e?new ya({size:D.optional("size",e)||0,width:D.optional("width",e)||0,height:D.optional("height",e)||0,url:C.required("url",e)}):null;return a},{}));return b})();function G(a){this.oa=a.oa;this.pa=a.pa;this.C=a.C;this.Z=a.Z;this.ka=a.ka;this.ba=a.ba;this.ma=a.ma}
function za(a){var b=C.required("experience",a),c;c=a.experiments;if(null!=c){if("object"!==typeof c)throw new TypeError('expected map for property "experiments", found: '+JSON.stringify(c));for(var d=new Map,e=t(Object.keys(c)),f=e.next();!f.done;f=e.next())f=f.value,d.set(f,ra(f,c));c=d}c=c||new Map;var d=C.optional("user",a)||null,e=C.optional("brand",a)||null,f=pa.optional("personal",a)||null,g;g=D.optional("cohort",a);return new G({oa:b,pa:c,C:d,Z:e,ka:f,ba:g||null,ma:C.optional("tier",a)||null})}
;function H(a,b){this.C=a.C;this.config=a;this.gb=null;this.ia=[];this.ready=!1;this.ga=b}function Aa(a,b){var c=Object.assign({},b);a.gb&&(c.design=a.gb);c.experience=a.config.oa;a.config.pa.forEach(function(a,b){c["Experiment:"+b]=a});a.config.Z&&(c.brand=a.config.Z);null!=a.config.ka&&(c.personal=a.config.ka);null!=a.config.ba&&(c.cohort=a.config.ba);a.config.ma&&(c.tier=a.config.ma);Ba(c);return c}
function Ba(a){try{var b=window.crypto||window.msCrypto,c=new Uint8Array(16);b.getRandomValues(c);a.insert_id=btoa(String.fromCharCode.apply(null,c))}catch(d){}}function Ca(a,b){null==a.ia?b.call(a):a.ia.push(b.bind(a))}function Da(a,b){var c={type:"signup",section:"signup_form",subsection:"collapsed",location:"logged_out_homepage"};b&&Object.assign(c,b);a.track("button_click",c)};function Ea(a){G.call(this,a)}w(Ea,G);function Fa(a,b){H.call(this,a,b)}w(Fa,H);function Ga(a){return new Fa(a,function(a,c,d){window.console.log("Google track: ",a,c,d)})}k=Fa.prototype;k.track=function(a,b){window.console.log("analytics:track",this.C,a,Aa(this,b))};k.identify=function(a,b,c){this.C=a;window.console.log("analytics:identify",a,b,c);return P.resolve()};k.jb=function(){window.console.log("analytics:getAnonymousUserId");return null};k.alias=function(a){window.console.log("analytics:alias",this.C,a);this.C=a};
k.set=function(a){window.console.log("analytics:set",this.C,a);return P.resolve()};k.union=function(a){window.console.log("analytics:union",this.C,a)};function Ha(a){G.call(this,a);this.W=a.W}w(Ha,G);function Ia(a){var b=za(a);return new Ha({oa:b.oa,pa:b.pa,C:b.C,Z:b.Z,ka:b.ka,ba:b.ba,ma:b.ma,W:C.required("segmentWriteKey",a)})};function Ja(a,b){H.call(this,a,b)}w(Ja,H);function Ka(a,b){ia("undefined"!==typeof analytics);var c=new Ja(a,b);analytics.ready(function(){for(c.ready=!0;c.ia&&0<c.ia.length;)c.ia.shift()();c.ia=null});window.segmentAnalyticsLoaded||(window.segmentAnalyticsLoaded=!0,analytics.ready(function(){var a=(new UAParser).getResult();c.set({"Most recent browser":a.browser.name+" "+a.browser.version,timezone:(new Date).getTimezoneOffset()/-60})}),analytics.page(),analytics.load(a.W));return c}k=Ja.prototype;
k.track=function(a,b){analytics.track(a,Aa(this,b),{integrations:{Leanplum:!1}})};k.identify=function(a,b,c){var d;b&&(d={id:b.id,username:b.username,personalBrand:b.Kb,displayName:b.displayName,largeAvatarUrl:b.Ib,roles:b.Lb,onboarding:b.Jb});return new P(function(b){analytics.identify(a,d,c,function(){b()})})};k.jb=function(){try{return window.amplitude.options.deviceId}catch(a){return null}};k.alias=function(a){analytics.alias(a)};
k.set=function(a){return new P(function(b){return analytics.identify(a,b)})};k.union=function(){};function La(a,b){if(a instanceof Ea)b=Ga(a);else if(a instanceof Ha)b=Ka(a,b);else throw Error("Invalid analytics config");a.C&&b.identify(a.C);return b}function Ma(){var a=qa(window.analyticsConfig),b=C.required("impl",a),c=window.ga||function(){};switch(b){case "console":return La(new Ea(za(a)),c);case "segment":return La(Ia(a),c);default:throw Error('No such analytics type: "'+b+'"');}};function I(){this.xhr=null}I.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};I.prototype.finish=function(){this.xhr=null};function J(a){this.$a=a&&a.analyticsContext||null;this.Fa=a&&a.authToken||null;this.Ia=a&&a.authzToken||null;this.ab=a&&a.brandRestriction||null;this.bb=a&&a.buildName||null;this.cb=a&&a.buildSha||null;this.ca=a&&a.csrfTokens||{};this.Va=a&&a.serverRoot||null;this.xb=!!this.Va;this.yb=this.Va?this.Va+"/_ajax":"/_ajax"}
function Na(a){var b=a.indexOf("/",1);return-1==b?a:a.substring(0,b)}J.prototype.get=function(a,b){var c=new I;this.send("GET",a,null,!0,null,c,null,b);return c};J.prototype.post=function(a,b,c,d){var e=new I;Oa(this,"POST",a,b,!0,0,e,c,d);return e};function Pa(a,b,c){var d;return(new P(function(e,f){d=a.post(b,c,null,function(a,b){200<=a&&300>a?e([b,a]):f([b,a])})})).cancellable().catch(P.CancellationError,function(a){d.cancel();throw a;})}
function Oa(a,b,c,d,e,f,g,h,m){var v=Na(c);if(v in a.ca){var l=a.ca[v];a.send(b,c,d,e,l,g,h,function(L,ma){418==L&&1>f?(a.ca[v]==l&&delete a.ca[v],Oa(a,b,c,d,e,f+1,g,h,m)):(m&&m(L,ma),g.finish())})}else a.send("GET","/csrf"+v,null,e,null,g,null,function(l,ma){200==l?(v in a.ca||(a.ca[v]=String(ma)),Oa(a,b,c,d,e,f,g,h,m)):(m(l,null),g.finish())})}
J.prototype.send=function(a,b,c,d,e,f,g,h){function m(){4==l.readyState&&v()}function v(){var a,b,c;try{a=l.status;var d,e;try{d=l.getResponseHeader("X-Canva-Auth")}catch(g){}try{e=l.getResponseHeader("X-Canva-Authz")}catch(g){}d&&(L.Fa="!"!=d?d:null);e&&(L.Ia="!"!=e?e:null);b=l.responseText}catch(g){if(g.message&&g.message.match(/c00c023f/))a=0,b="";else throw f.finish(),g;}b=b&&b.trim?b.trim():"";d=b.substring(0,20);if(0<d.length){if("'\"])}while(1);\x3c/x\x3e//"!=d){h(500,null);f.finish();return}b=
b.substring(20);try{c=JSON.parse(b)}catch(g){h(500,null);f.finish();return}}else c=null;h(a,c);f.finish()}b=this.yb+b;var l=f.xhr=new XMLHttpRequest,L=this;l.open(a,b,d);this.xb&&(l.withCredentials=!0);"GET"!=a&&e&&l.setRequestHeader("X-Csrf-Token",e);this.$a&&l.setRequestHeader("X-Canva-Analytics",this.$a);this.Fa&&l.setRequestHeader("X-Canva-Auth",this.Fa);this.Ia&&l.setRequestHeader("X-Canva-Authz",this.Ia);this.ab&&l.setRequestHeader("X-Canva-Brand",this.ab);this.bb&&l.setRequestHeader("X-Canva-Build-Name",
this.bb);this.cb&&l.setRequestHeader("X-Canva-Build-Sha",this.cb);null===c?a=null:"object"==typeof c&&"undefined"!==typeof Blob&&c instanceof Blob?(l.setRequestHeader("Content-Type",c.type),g&&l.upload.addEventListener("progress",g,!1),a=c):(l.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8"),a=JSON.stringify(c));d?(l.onreadystatechange=m,l.send(a)):(l.send(a),v())};function K(a){this.tb=a.fallback;this.mb=a.localePrecedence;this.Ta={};this.ya=a.messages;this.vb=this.mb[0];this.wb=!!a.returnKeys}K.prototype.format=function(a,b){if(this.wb)return[].join.call(arguments,":");var c=Qa(this,a);return c.format.call(c,[].slice.call(arguments,1))};
function Qa(a,b){if(a.Ta.hasOwnProperty(b))return a.Ta[b];var c=a.vb,d;a.mb.some(function(c){d=a.ya[c]&&a.ya[c][b];return void 0!==d});d||(c=a.tb,d=a.ya[c]&&a.ya[c][b]);if(!d)throw Error("Unknown message: "+b);c=new IntlMessageFormat(d,c,Ra);return a.Ta[b]=c}var Ra={number:{currency:{style:"currency",currency:"USD"},integer:{maximumFractionDigits:0},fixed2:{minimumFractionDigits:2,maximumFractionDigits:2}}};function Sa(){this.config=window.cmsg;this.g=this.j=null}function Ta(a){a.j||(a.j=new Ua(a.config));return a.j}function Ua(a){K.apply(this,arguments)}w(Ua,K);function Va(a){K.apply(this,arguments)}w(Va,K);function M(a){return a.format("passwordStrengthFeedbackMessage4")}function Wa(a){return a.format("passwordStrengthFeedbackMessage7")}function Xa(a){return a.format("passwordStrengthFeedbackMessage11")}function Ya(a){return a.format("passwordStrengthFeedbackMessage12")}
function Za(a){return a.format("passwordStrengthFeedbackMessage13")};function $a(){}w($a,Error);function ab(){}w(ab,$a);function bb(){}w(bb,$a);function cb(a,b,c,d,e,f,g,h,m){this.accessToken=a;this.email=b;this.ib=c;this.id=d;this.lb=e;this.name=f;this.permissions=g;this.nb=h;this.qb=m}cb.prototype.Ma=function(){return this.email};cb.prototype.getName=function(){return this.name};function db(a){this.error=a.error;this.redirect=a.redirect;this.rb=a.rb}db.prototype.getError=function(){return this.error};function eb(a){var b=C.optional("error",a),c=C.optional("redirect",a);a=pa.optional("userReactivated",a)||!1;return new db({error:b,redirect:c,rb:a})};function fb(a){this.K=a;this.path="/login"}function gb(a,b){return Pa(a.K,a.path+"/facebook",xa(b)).get(0).then(qa).then(eb)};function N(a){this.K=a.K;this.Sa=a.Sa;this.Da=a.config.Da;this.O=null}
var hb={H:function(a,b){var c=[];b.permissions.data.forEach(function(a){"granted"==a.status&&c.push(a.permission)});this.permissions=c},param:"permissions"},ib={zb:{H:function(a){this.accessToken=a.accessToken}},Ab:{H:function(a,b){this.email=b.email},param:"email"},Cb:{H:function(a,b){this.ib=b.first_name},param:"first_name"},Db:{H:function(a){this.id=a.userID}},Eb:{H:function(a,b){this.lb=b.last_name},param:"last_name"},Fb:{H:function(a,b){this.name=b.name},param:"name"},Gb:hb,Hb:{H:function(a,
b){this.nb=b.picture.data.url},param:"picture.type(large)"},Bb:{H:function(a){this.qb=(new Date).getTime()+1E3*a.expiresIn}}};N.prototype.init=function(){var a=this,b,c;b=this;return(c=window.facebookSdkPromise)?c:c=window.facebookSdkPromise=new P(function(c,e){a.Ua=function(b){jb(a);e(b)};window.fbAsyncInit=function(){FB.init({version:"v2.6",appId:b.Da,channelUrl:"//"+window.location.hostname+"/static/channel.html",status:!0,xfbml:!1});jb(a);c(a)};kb(a)})};N.prototype.Ua=function(){jb(this)};
function jb(a){document.getElementById("facebook-jssdk").removeEventListener("error",a.Ua)}function kb(a){var b,c=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(b=document.createElement("script"),b.id="facebook-jssdk",b.src="//connect.facebook.com/en_US/sdk.js",b.addEventListener("error",a.Ua),c.parentNode.insertBefore(b,c))}
N.prototype.Ea=function(a){return gb(this.Sa,new wa({type:"FACEBOOK",W:a.accessToken})).catch(function(a){if(Array.isArray(a)&&404===a[1])throw new bb;throw new ab;})};function lb(a){return a.getAuthResponse().then(function(b){return a.Ea(b)})}function mb(a,b){return new P(function(c,d){nb(a,[hb]).then(function(e){e=e.permissions;var f=_.difference(b,e);a.O&&(a.O.permissions=e);f.length?d():c()}).catch(d)})}
function ob(a){return new P(function(b,c){var d;d=Object.keys(ib).map(function(a){return ib[a]});nb(a,d).then(function(d){d.email?(a.O=new cb(d.accessToken,d.email,d.ib,d.id,d.lb,d.name,d.permissions,d.nb,d.qb),b(a.O)):c("EMAIL_NOT_VERIFIED")}).catch(c)})}
function nb(a,b){return new P(function(c,d){a.getAuthResponse().then(function(a){for(var f=[],g=0;g<b.length;g++){var h=b[g];h.param&&f.push(h.param)}f=f.join(",");FB.api("/me?return_ssl_resources\x3d1\x26fields\x3d"+encodeURIComponent(f),function(f){if("error"in f)d("FB_API_ERROR");else{for(var g={},h=0;h<b.length;h++)b[h].H.call(g,a,f);c(g)}})}).catch(function(b){a.O=null;d(b)})})}
N.prototype.getAuthResponse=function(){return new P(function(a,b){FB.getAuthResponse()?a(FB.getAuthResponse()):FB.getLoginStatus(function(c){"connected"==c.status?a(c.authResponse):b("UNAUTHORIZED")})})};
function pb(a){var b=["email","public_profile"];return new P(function(c,d){function e(b){a.O=null;d(b)}function f(f){f.authResponse&&f.status?mb(a,b).then(c).catch(e):d("FB_API_ERROR")}var g=_.difference(b,a.O?a.O.permissions:[]);0<g.length?FB.login(f,{scope:g.join(",")}):mb(a,b).then(c).catch(e)})}function qb(){this.Da=C.required("appId",window.facebookConfig)};function O(){}w(O,Error);function rb(a,b){if(b instanceof Q)return a.format("authGoogleSignInFailed");if(b instanceof R)return a.format("authGoogleFailedToFetchUserInformation");if(b instanceof sb)return a.format("authTrySigningUpFirst");if(b instanceof tb)return a.format("authGoogleSignInFailed");throw Error("unrecognised GoogleServiceError");}function Q(){}w(Q,O);function R(){}w(R,O);function sb(){}w(sb,O);function tb(){}w(tb,O);function ub(a,b,c){this.name=a||null;this.picture=b||null;this.email=c||null}ub.prototype.getName=function(){return this.name};ub.prototype.Ma=function(){return this.email};function S(a){this.accessToken=a.accessToken||null;this.Ka=a.Ka;this.w=a.w||null;this.G=a.G;this.F=a.F;this.ha=a.ha;this.Ba=null;if(this.accessToken){var b=this;this.xa().then(function(){gapi.auth.setToken({accessToken:b.accessToken})})}if(this.ha&&!a.w)throw Error("Client cannot be configured with offline and not have a redirectUri");this.xa().then(this.Ha.bind(this,{Ya:!1}))}S.prototype.load=function(){return this.xa()};function vb(a){return new P(function(b,c){$.getJSON(a).done(b).fail(c)})}
function wb(a){function b(){return e.Ka("https://www.googleapis.com/oauth2/v1/userinfo?alt\x3djson\x26access_token\x3d"+encodeURIComponent(e.accessToken))}function c(){throw new R;}function d(a){e.Ba=a?$.extend(new ub,{name:a.name,picture:a.picture,email:a.email}):null;return e.Ba}var e=a;if(0>a.F.indexOf("profile"))throw Error("API was not configured with USER_PROFILE_READ scope");return a.Ba?P.resolve(a.Ba):a.xa().then(a.Ha.bind(a,{Ya:!0})).then(b).then(d).catch(c)}
function xb(){var a={},b=new P(function(b,d){a.resolve=b;a.reject=d});a.promise=b;return a}
(function(){function a(a){var c;try{c=JSON.parse(a.data)}catch(d){return}c.f&&null===document.getElementById(c.f)&&a.stopImmediatePropagation()}window.googleApiLoaderDeferred=window.googleApiLoaderDeferred||xb();window.googleApiLoaderScript=window.googleApiLoaderScript||null;S.prototype.sb=function(){var a=window.googleApiLoaderDeferred,c=$("\x3cscript\x3e");c[0].onerror=a.reject;c.attr({src:"https://apis.google.com/js/client.js?onload\x3dGoogleApiOnGapiLoad",type:"text/javascript"});c.appendTo("head");
return c};S.prototype.xa=function(){window.googleApiLoaderScript||(window.addEventListener("message",a),window.googleApiLoaderScript=this.sb());return window.googleApiLoaderDeferred.promise};window.GoogleApiOnGapiLoad=function(){window.googleApiLoaderDeferred.resolve()}})();S.prototype.Ga=function(a){return this.Ha({Ya:!0,La:a&&a.La})};
S.prototype.Ha=function(a){var b=this;if(this.accessToken)return P.resolve(this.accessToken);var c={client_id:this.G,immediate:!a.Ya,approval_prompt:a.La?"force":"auto",access_type:this.ha?"offline":"online",response_type:this.ha?"code":"token",scope:this.F};this.ha&&(c=$.extend({redirect_uri:this.w},c));return new P(function(a,e){gapi.auth.authorize(c,function(c){var g=c&&c.access_token;c=c&&c.code;g?(b.accessToken=g,a(b.accessToken)):c?a(c):e(new tb)})})};function T(a,b){this.Ja=a;this.namespace=void 0===b?null:b}T.prototype.setItem=function(a,b){try{return this.Ja.setItem(null==this.namespace?a:this.namespace+"."+a,b),!0}catch(c){return!1}};T.prototype.getItem=function(a){return this.Ja.getItem(null==this.namespace?a:this.namespace+"."+a)};T.prototype.removeItem=function(a){this.Ja.removeItem(null==this.namespace?a:this.namespace+"."+a)};function yb(a){this.G=a.config.G;this.w=a.config.w;this.F=["profile","email"];this.google=zb(this);this.K=a.K;this.aa=a.aa;this.ub=3;this.va=null;this.la=this.la.bind(this);this.Aa=this.Aa.bind(this)}function zb(a,b){b=new S({accessToken:b,G:a.G,Ka:vb,ha:!0,w:a.w,F:a.F});a.google=b;return a.google}k=yb.prototype;k.load=function(){return this.google.load()};function Ab(){var a,b,c=new P(function(c,e){a=c;b=e});return{resolve:a,reject:b,promise:c}}
k.Ga=function(){var a=this;this.va=Ab();window.GoogleAuthMessageCallback&&window.removeEventListener("message",window.GoogleAuthMessageCallback);window.addEventListener("message",this.la,!1);window.GoogleAuthMessageCallback=this.la;window.canvaGoogleAuthReceiveMessage=this.Aa;this.google.Ga({La:!Bb(this)}).then(function(b){return Cb(a,b)}).catch(function(b){return U(a,b)});return this.va.promise};function U(a,b){a.va.reject(b);Db(a)}
function Db(a){window.removeEventListener("message",a.la);window.canvaGoogleAuthReceiveMessage===a.la&&(window.canvaGoogleAuthReceiveMessage=null)}k.la=function(a){a.origin===window.location.origin&&this.Aa(a.data)};k.Aa=function(a){var b;try{b=JSON.parse(a)}catch(c){return}a=b.code;b.error?U(this,new Q):a&&Cb(this,a)};
function Cb(a,b){function c(a){wb(zb(f,a.accessToken)).then(function(b){var c=a.N||Bb(f);if(!c)throw new O;f.aa&&f.aa.setItem("GoogleAuthRefreshTokenKey",c);var d=f;d.va.resolve(new Eb({email:b.Ma(),N:c,accessToken:a.accessToken}));Db(d)}).catch(function(){return U(f,new R)})}function d(a){429==a&&h<f.ub?setTimeout(function(){e(g).spread(c,d)},1E3):U(f,new Q)}function e(a){h++;return Pa(f.K,"/google/requesttokens",Fb(a)).spread(Gb)}var f=a,g=new Hb({code:b,Qa:"authorization_code",w:f.w,F:f.F}),h=
0;e(g).then(c,d)}k.Ea=function(a){var b=this;return new P(function(c,d){b.K.post("/login/google",Ib(a),null,function(a,b){switch(a){case 200:c(new Jb({redirect:C.required("redirect",b)}));break;case 404:d(new sb);break;default:d(new Q)}})})};function Bb(a){return a.aa&&a.aa.getItem("GoogleAuthRefreshTokenKey")}function Kb(a){this.G=a.G;this.w=a.w}function Lb(){var a=window.googleConfig;return new Kb({G:C.required("clientId",a),w:C.required("redirectUri",a)})}
function Hb(a){this.code=a.code;this.Qa=a.Qa;this.w=a.w;this.F=a.F}function Fb(a){var b=F.required("code",a.code),c=F.required("grantType",a.Qa),d=F.required("redirectUri",a.w);a=F.ob("scopes",a.F);return{code:b,grantType:c,redirectUri:d,scopes:a}}function Mb(a){this.accessToken=a.accessToken;this.N=a.N}function Gb(a){return new Mb({accessToken:C.required("accessToken",a),N:C.optional("refreshToken",a)})}function Eb(a){this.email=a.email;this.N=a.N;this.accessToken=a.accessToken}
function Ib(a){return{type:"GOOGLE",accessToken:F.required("accessToken",a.accessToken),refreshToken:F.required("refreshToken",a.N)}}function Jb(a){this.redirect=a.redirect};function Nb(a){a=a||{};soy.asserts.assertType(null==a.D||a.D instanceof goog.soy.data.SanitizedContent||goog.isString(a.D),"cssClass",a.D,"null|string|undefined");a=a.D;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(a?'class\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':"")+' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 95.8"\x3e\x3cpath d\x3d"M.4 90.2L46.6 2C48-.7 51.9-.7 53.3 2l46.2 88.2c1.3 2.5-.5 5.5-3.4 5.5H3.8c-2.9.1-4.7-3-3.4-5.5z"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M45.1 73.7c0-1.6.4-2.8 1.3-3.7.9-.8 2.1-1.2 3.8-1.2 1.6 0 2.8.4 3.7 1.3.9.8 1.3 2.1 1.3 3.6s-.4 2.7-1.3 3.6c-.9.9-2.1 1.3-3.7 1.3s-2.9-.4-3.8-1.3c-.9-.9-1.3-2.1-1.3-3.6zm8.6-9.9h-7l-1.5-28.2h10l-1.5 28.2z"/\x3e\x3c/svg\x3e')}
function Ob(a){a=a||{};soy.asserts.assertType(null==a.D||a.D instanceof goog.soy.data.SanitizedContent||goog.isString(a.D),"cssClass",a.D,"null|string|undefined");a=a.D;return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg "+(a?'class\x3d"'+soy.$$escapeHtmlAttribute(a)+'"':"")+' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 100"\x3e\x3ccircle cx\x3d"50" cy\x3d"50" r\x3d"50"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M69.5 25.8l-26 35.4L30.1 54c-3.3-2.1-5.6 2.9-3.8 4.6 1.8 1.7 18.2 16.6 18.2 16.6.5.4 1.2.4 1.7.1.2-.1.4-.3.5-.5 0 0 24.7-40.9 26.9-44.6 2.3-3.8-1.6-7.8-4.1-4.4z"/\x3e\x3c/svg\x3e')}
;function V(a){z("INPUT"===a.u.get(0).tagName,"the view's element must be an input");Backbone.View.call(this,{className:"strengthChecker"});this.pb=a.pb;this.g=a.g;this.Xa=this.zxcvbn=null;this.u=a.u;this.ua=a.ua;this.Za=this.sa=this.fa=this.kb=null;this.R=this.R.bind(this);this.fb=_.debounce(this.R,300);this.Ra=a.Ra||1}w(V,Backbone.View);
V.prototype.render=function(){var a={},b,a=a||{};soy.asserts.assertType(null==a.wa||a.wa instanceof goog.soy.data.SanitizedContent||goog.isString(a.wa),"iconClasses",a.wa,"null|string|undefined");a=a.wa;a=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"strengthChecker__icons"\x3e'+Nb({D:soydata.$$markUnsanitizedTextForInternalBlocks("strengthChecker__icon strengthChecker__icon--warning "+(null==(b=a)?"":b))})+Ob({D:soydata.$$markUnsanitizedTextForInternalBlocks("strengthChecker__icon strengthChecker__icon--tick "+
(null==(b=a)?"":b))})+'\x3c/div\x3e\x3cdiv class\x3d"strengthChecker__messageSandbox"\x3e\x3c/div\x3e\x3cdiv class\x3d"strengthChecker__message"\x3e\x3c/div\x3e');this.u.addClass("strengthChecker__input");this.u.attr("data-strength",Pb);this.$el.html(a.toString());this.$el.attr("data-strength",Pb);this.kb=this.$(".strengthChecker__icons");this.fa=this.$(".strengthChecker__message");this.sa=this.$(".strengthChecker__messageSandbox");Qb(this);this.u.on("focus",this.R);this.u.on("input",this.fb);this.u.on("blur",
this.R);this.R()};V.prototype.insert=function(a){a=a||this.u;a.after(this.$el);Rb(this)};function Rb(a){a.fa.css("width","");a.sa.css("width","");a.fa.outerWidth(a.u.outerWidth());a.sa.outerWidth(a.u.outerWidth());Qb(a)}function Qb(a){var b,c,d;b=a.kb.find("svg");c=parseFloat(a.u.css("margin-bottom"));d=a.u.outerHeight()*a.Ra;b.outerHeight(d);b.outerWidth(d);b.css("top",-c);a.fa.css("margin-bottom",c)}
V.prototype.remove=function(){Backbone.View.prototype.remove.call(this);this.u.off("focus",this.R);this.u.off("input",this.fb);this.u.off("blur",this.R)};
V.prototype.R=function(){var a=!this.u.is(":focus");if(this.zxcvbn){var b,c;b=this.u.val();0===b.length?b=Pb:(c=this.ua?this.zxcvbn(b,Sb(this)):this.zxcvbn(b),b=0===c.score?Tb:3>c.score?Ub:Vb);var d=b;this.u.attr("data-strength",d);this.$el.attr("data-strength",d);b===Pb||a?this.$el.addClass("strengthChecker--noFeedback"):(a=Wb,b===Vb?(this.Xa||(this.Xa=_.shuffle([this.g.format("passwordStrengthFeedbackMessage1"),this.g.format("passwordStrengthFeedbackMessage2"),this.g.format("passwordStrengthFeedbackMessage3")])[0]),
c=this.Xa):(c=c.feedback,c=(c.warning&&c.warning.length?[c.warning]:[]).concat(c.suggestions),z(!!c.length,"Can't extract feedback from an empty zxcvbn response"),c=c[0],this.Za||(this.Za={"Use a few words, avoid common phrases":M(this.g),"No need for symbols, digits, or uppercase letters":M(this.g),"Add another word or two. Uncommon words are better.":this.g.format("passwordStrengthFeedbackMessage5"),"Straight rows of keys are easy to guess":this.g.format("passwordStrengthFeedbackMessage6"),"Short keyboard patterns are easy to guess":Wa(this.g),
"Use a longer keyboard pattern with more turns":Wa(this.g),'Repeats like "aaa" are easy to guess':this.g.format("passwordStrengthFeedbackMessage8"),'Repeats like "abcabcabc" are only slightly harder to guess than "abc"':this.g.format("passwordStrengthFeedbackMessage9"),"Avoid repeated words and characters":M(this.g),"Sequences like abc or 6543 are easy to guess":this.g.format("passwordStrengthFeedbackMessage10"),"Avoid sequences":M(this.g),"Recent years are easy to guess":Xa(this.g),"Avoid recent years":Xa(this.g),
"Avoid years that are associated with you":Xa(this.g),"Dates are often easy to guess":Ya(this.g),"Avoid dates and years that are associated with you":Ya(this.g),"This is a top-10 common password":M(this.g),"This is a top-100 common password":M(this.g),"This is a very common password":M(this.g),"This is similar to a commonly used password":M(this.g),"A word by itself is easy to guess":M(this.g),"Names and surnames by themselves are easy to guess":Za(this.g),"Common names and surnames are easy to guess":Za(this.g),
"Capitalization doesn't help very much":M(this.g),"All-uppercase is almost as easy to guess as all-lowercase":M(this.g),"Reversed words aren't much harder to guess":M(this.g),"Predictable substitutions like '@' instead of 'a' don't help very much":M(this.g)}),c=this.Za[c],A(c,"Unknown zxcvbn message")),a(this,c))}};
function Sb(a){A(a.ua,"userInputSelector must be defined");a=a.ua.toArray().map(function(a){return $(a).val()});var b=/[s@.]+/,c=a.map(function(a){return a.split(b)}).filter(function(a){return 1<a.length});return a.concat.apply(a,[].concat(u(c))).filter(function(a){return 0!=a.length})}function Wb(a,b){a.sa.text(b);oa(function(){a.fa.outerHeight(a.sa.outerHeight());a.fa.text(b);a.$el.removeClass("strengthChecker--noFeedback")})}function Xb(a,b){a.$el.toggleClass("strengthChecker--noIcons",!b)}
var Pb=0,Tb=1,Ub=2,Vb=3;function W(a){var b={};Backbone.View.call(this,{el:a.el,events:_.extend({},a.events,(b["blur .js-form__input"]=function(a){Yb(this,$(a.currentTarget))},b.submit=function(a){this.za(a)},b))})}w(W,Backbone.View);
function Yb(a,b){var c,d,e;c=b.get(0);e=b.siblings(".form__inputMessage");d=b.attr("name");c.setCustomValidity("");b.removeClass("form__input--withError");c.validity.valid||(c.validity.valueMissing?c.setCustomValidity(a.Oa(d)):c.validity.typeMismatch?c.setCustomValidity(a.Pa(d)):c.validity.patternMismatch&&c.setCustomValidity(a.Na(d)),b.addClass("form__input--withError"),b.one("input",function(){return b.removeClass("form__input--withError")}),e.text(c.validationMessage))}
W.prototype.za=function(a){var b=!1;this.el.checkValidity()?(this.$(".js-form__input").prop("readonly",!0),this.$(".js-form__submitButton").prop("disabled",!0)):(a.preventDefault(),a=this.$(".js-form__input:invalid").first(),Yb(this,a),a.focus(),b=!0);return b};W.prototype.Oa=function(){throw Error("Unhandled error");};W.prototype.Pa=function(){throw Error("Unhandled error");};W.prototype.Na=function(){throw Error("Unhandled error");};function X(a){var b={};W.call(this,{el:a.el,events:(b.submit=function(a){this.za(a)},b)});this.analytics=a.analytics;this.j=a.j;this.Wa=0}w(X,W);
X.prototype.Oa=function(a){switch(a){case "displayName":a=this.j.format("signupFullNameRequiredInlineErrorMessage");break;case "email":a=this.j.format("signupEmailRequiredInlineErrorMessage");break;case "emailConfirmation":a=this.j.format("signupConfirmEmailRequiredInlineErrorMessage");break;case "password":a=this.j.format("signupPasswordRequiredInlineErrorMessage");break;default:a=W.prototype.Oa.call(this,a)}return a};
X.prototype.Pa=function(a){return"email"===a||"emailConfirmation"==a?this.j.format("signupEmailInvalidFormatInlineErrorMessage"):W.prototype.Pa.call(this,a)};X.prototype.Na=function(a){switch(a){case "emailConfirmation":a=this.j.format("signupConfirmEmailMatchInlineErrorMessage");break;case "password":a=this.j.format("signupPasswordMinLengthInlineErrorMessage");break;default:a=W.prototype.Na.call(this,a)}return a};
X.prototype.za=function(a){a=!W.prototype.za.call(this,a);this.Wa++;this.analytics.track("signup_submitted",{method:"email",attempts:this.Wa,hasErrors:!a});return a};
function Zb(a){var b={};Backbone.View.call(this,{el:a.el,events:(b["click .js-signupForm__buttonEmail"]=function(){$(document).trigger("forceDirtyInputCheck");$b(this);this.$(".signupForm__signupButtons").addClass("fadeTransitionContent--animateCollapse");this.$(".signupForm__above").addClass("fadeTransitionContent--animateCollapse");this.$(".signupForm__below .form__footButtons").addClass("fadeTransitionContent--animateExpand");this.$(".signupForm__emailForm").addClass("fadeTransitionContent--animateExpand");
this.$el.removeClass("signupForm--collapsed");this.$el.removeClass("signupForm--notransitions");this.$(".js-form__input[name\x3ddisplayName]").focus();Rb(this.ta)},b["click .js-form__footButton"]=function(a){ac(this,a)},b["click .js-signupForm__logo"]=function(a){ac(this,a)},b["change .js-form__input[name\x3demail]"]=function(a){a=$(a.currentTarget).val();a=a.replace(/[\/\\^$*+?.()|[\]{}]/g,"\\$\x26");this.$(".js-form__input[name\x3demailConfirmation]").attr("pattern",a)},b["blur .js-form__input[name\x3dpassword]"]=
function(a){Xb(this.ta,a.currentTarget.validity.valid)},b["input .js-form__input[name\x3dpassword]"]=function(){Xb(this.ta,!0)},b)});new X({el:$(a.el).find(".js-signupForm__form").length?$(a.el).find(".js-signupForm__form"):$(a.el),analytics:a.analytics,j:a.j});this.analytics=a.analytics;this.ta=a.ta;this.Wa=0;this.ja=a.ja}w(Zb,Backbone.View);Zb.prototype.start=function(){bc(this);this.analytics.track("signup_form_loaded",{pageVariant:this.ja})};
function bc(a){var b=a.$("#analyticsId"),c=b.val();c?a.analytics.identify(c,null):Ca(a.analytics,function(){var c=a.analytics.jb();c&&b.val(c)})}function $b(a){a=a.$(".fadeTransitionContent");a.removeClass("fadeTransitionContent--animateCollapse");a.removeClass("fadeTransitionContent--animateExpand")}
function ac(a,b){a.$el.hasClass("signupForm--collapsed")||(b.preventDefault(),a.$(".js-form__input").removeClass("form__input--withError").val(""),a.$(".js-signupForm__errors").empty(),$b(a),a.$(".signupForm__signupButtons").addClass("fadeTransitionContent--animateExpand"),a.$(".signupForm__below .form__footButtons").addClass("fadeTransitionContent--animateCollapse"),a.$(".signupForm__above").addClass("fadeTransitionContent--animateExpand"),a.$(".signupForm__emailForm").addClass("fadeTransitionContent--animateCollapse"),
a.$el.addClass("signupForm--collapsed"))};function Y(a){this.$el=a;this.ea={}}Y.prototype.remove=function(){this.$el.off();this.$el.remove()};Y.prototype.on=function(a,b){z(!this.ea[a],"listener already registered for event {}",a);this.ea[a]=b};Y.prototype.off=function(a,b){null==a?this.ea={}:null!=b&&this.ea[a]!=b||delete this.ea[a]};Y.prototype.trigger=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(d=this.ea[a])&&d.apply(null,[].concat(u(c)))};function cc(a){soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml||a.message instanceof soydata.UnsanitizedText||goog.isString(a.message),"message",a.message,"soydata.SanitizedHtml");var b=a.message;soy.asserts.assertType(goog.isString(a.X)||a.X instanceof goog.soy.data.SanitizedContent,"alertClass",a.X,"string|goog.soy.data.SanitizedContent");var c=a.X;soy.asserts.assertType(a.icon instanceof soydata.SanitizedHtml||a.icon instanceof soydata.UnsanitizedText||goog.isString(a.icon),"icon",
a.icon,"soydata.SanitizedHtml");var d=a.icon;soy.asserts.assertType(null==a.title||a.title instanceof soydata.SanitizedHtml||a.title instanceof soydata.UnsanitizedText||goog.isString(a.title),"title",a.title,"?soydata.SanitizedHtml|string|undefined");var e=a.title;soy.asserts.assertType(null==a.o||a.o instanceof goog.soy.data.SanitizedContent||goog.isString(a.o),"classes",a.o,"null|string|undefined");var f=a.o;soy.asserts.assertType(null==a.l||goog.isBoolean(a.l)||1===a.l||0===a.l,"dismissible",a.l,
"boolean|null|undefined");var g=a.l;soy.asserts.assertType(null==a.global||goog.isBoolean(a.global)||1===a.global||0===a.global,"global",a.global,"boolean|null|undefined");var h=a.global;soy.asserts.assertType(null==a.i||goog.isBoolean(a.i)||1===a.i||0===a.i,"withIcon",a.i,"boolean|null|undefined");var m=a.i;soy.asserts.assertType(null==a.small||goog.isBoolean(a.small)||1===a.small||0===a.small,"small",a.small,"boolean|null|undefined");a=a.small;m=null==m?!0:m;b=""+('\x3cdiv class\x3d"feedbackAlert '+
soy.$$escapeHtmlAttribute(c)+(h?" feedbackAlert--global":"")+(m?" feedbackAlert--withIcon":"")+(g?" feedbackAlert--dismissible":"")+(a?" feedbackAlert--small":"")+(f?" "+soy.$$escapeHtmlAttribute(f):"")+'"\x3e\x3cdiv class\x3d"feedbackAlert__message"\x3e'+(m?soy.$$escapeHtml(d):"")+(e?'\x3cstrong class\x3d"feedbackAlert__title"\x3e'+soy.$$escapeHtml(e)+"\x3c/strong\x3e ":"")+soy.$$escapeHtml(b)+"\x3c/div\x3e"+(g?'\x3cbutton type\x3d"button" class\x3d"feedbackAlert__closeButton"\x3e'+soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"24" height\x3d"24" viewBox\x3d"0 0 24 24"\x3e\x3cpolygon points\x3d"19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12"/\x3e\x3c/svg\x3e')+
"\x3c/button\x3e":"")+"\x3c/div\x3e");return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)}
function dc(){return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M12,2 C17.52,2 22,6.48 22,12 C22,17.52 17.52,22 12,22 C6.48,22 2,17.52 2,12 C2,6.48 6.48,2 12,2 Z M12,3.33333333 C7.21637967,3.33333333 3.33333333,7.21637967 3.33333333,12 C3.33333333,16.7836203 7.21637967,20.6666667 12,20.6666667 C16.7836203,20.6666667 20.6666667,16.7836203 20.6666667,12 C20.6666667,7.21637967 16.7836203,3.33333333 12,3.33333333 Z M13,17 L11,17 L11,11 L13,11 L13,17 Z M13,9 L11,9 L11,7 L13,7 L13,9 Z" transform\x3d"rotate(180 12 12)"/\x3e\x3c/svg\x3e')};function ec(a,b){var c=this;Y.call(this,a);this.Y=b;a.hasClass("feedbackAlert--dismissible")&&a.on("click",".feedbackAlert__closeButton",function(){return fc(c)})}w(ec,Y);function fc(a){a.$el.on("transitionend",function(b){return b.target===a.$el.get(0)&&a.remove()});a.$el.addClass("feedbackAlert--hidden")}ec.prototype.remove=function(){if(this.Y){this.Y.removeClass("globalFeedbackAlertContainer");this.Y.css("padding-top","");var a=parseFloat(this.Y.data("gcpt"));a&&this.Y.css("padding-top",a);this.Y.removeData("gcpt")}Y.prototype.remove.call(this)};function gc(a){var b={};Backbone.View.call(this,{el:a.el,events:(b["click .js-socialAuth__facebookButton"]=function(a){hc(this,a)},b["click .js-socialAuth__googleButton"]=function(a){ic(this,a)},b)});this.da=a.da;this.qa=a.qa;this.j=a.j;this.mode=a.mode;this.eb=a.eb;this.Ca=this.$(".socialAuth__alerts");this.hb=!1}w(gc,Backbone.View);
gc.prototype.start=function(){var a=this,b,c;b=this.$(".js-socialAuth__facebookButton");c=this.$(".js-socialAuth__googleButton");b.prop("disabled",!0);this.da.init().then(function(){return b.prop("disabled",!1)}).catch(function(c){if(!c.currentTarget||"script"!==c.currentTarget.localName)throw c;a.hb=!0;b.prop("disabled",!1)});c.prop("disabled",!0);this.qa.load().then(function(){return c.prop("disabled",!1)})};
function jc(a){a.hasClass("buttonSpinner")||(a.addClass("buttonSpinner"),a.append('\x3cdiv class\x3d"spinner"/\x3e'))}function kc(a){a.hasClass("buttonSpinner")&&(a.find(".spinner").remove(),a.removeClass("buttonSpinner"))}
function hc(a,b){lc(a);a.hb?(mc(a,a.j.format("authFacebookSdkInitError","https://support.canva.com/troubleshooting/logging-in/")),$(b.currentTarget).prop("disabled",!0)):(jc($(b.currentTarget)),pb(a.da).then(function(){return nc(a)}).catch(function(){Z(a,a.j.format("signupLoginFacebookPermissionsFailure"))}))}
function nc(a){ob(a.da).then(function(b){return oc(a,b)}).catch(function(b){"EMAIL_NOT_VERIFIED"===b?Z(a,a.j.format("signupLoginUnverifiedFacebookEmailAddress")):Z(a,a.j.format("signupLoginFacebookSignInFailure"))})}
function oc(a,b){lb(a.da).then(function(a){var b=(new UAParser).getResult().browser;"Safari"!==b.name||"8"!==b.major||"DESIGN_BUTTON"!==window.analyticsConfig.experience?window.location.href=window._loginRedirect||a.redirect:window.location.reload()}).catch(function(c){if(a.mode===pc){c=a.$el.data("csrf-token");var d=b.accessToken,e=b.Ma(),f=a.$el.data("signup-redirect"),g=a.$el.data("referrer");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"csrfToken",c,"string|goog.soy.data.SanitizedContent");
soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"facebookToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"email",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==f||f instanceof goog.soy.data.SanitizedContent||goog.isString(f),"signupRedirect",f,"null|string|undefined");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),
"referrer",g,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(f?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e':"")+(g?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(c)+
'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"facebook"\x3e\x3cinput name\x3d"facebookToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else{d=a.j;if(c instanceof ab)c=d.format("authFacebookSignInFailed");else if(c instanceof bb)c=d.format("authTrySigningUpFirst");else throw Error("unrecognised FacebookServiceError");
Z(a,c)}})}function ic(a,b){lc(a);jc($(b.currentTarget));a.qa.Ga().then(function(b){return qc(a,b)}).catch(function(b){Z(a,rb(a.j,b))})}
function qc(a,b){a.qa.Ea(b).then(function(a){window.location.href=window._loginRedirect||a.redirect}).catch(function(c){if(a.mode===pc){c=A(b.email,"missing email");A(b.N,"missing refreshToken");var d=a.$el.data("csrf-token"),e=b.N,f=b.accessToken,g=a.$el.data("signup-redirect"),h=a.$el.data("referrer");soy.asserts.assertType(goog.isString(d)||d instanceof goog.soy.data.SanitizedContent,"csrfToken",d,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(f)||f instanceof goog.soy.data.SanitizedContent,
"googleAccessToken",f,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(e)||e instanceof goog.soy.data.SanitizedContent,"googleRefreshToken",e,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(goog.isString(c)||c instanceof goog.soy.data.SanitizedContent,"email",c,"string|goog.soy.data.SanitizedContent");soy.asserts.assertType(null==g||g instanceof goog.soy.data.SanitizedContent||goog.isString(g),"signupRedirect",g,"null|string|undefined");soy.asserts.assertType(null==
h||h instanceof goog.soy.data.SanitizedContent||goog.isString(h),"referrer",h,"null|string|undefined");c=soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cform action\x3d"/signup" method\x3d"post" class\x3d"socialAuth__auxiliaryForm"\x3e'+(g?'\x3cinput id\x3d"signupRedirect" name\x3d"signupRedirect" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(g)+'"\x3e':"")+(h?'\x3cinput id\x3d"referrer" name\x3d"referrer" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(h)+'"\x3e':"")+'\x3cinput name\x3d"csrfToken" type\x3d"hidden" value\x3d"'+
soy.$$escapeHtmlAttribute(d)+'"\x3e\x3cinput name\x3d"authMode" type\x3d"hidden" value\x3d"google"\x3e\x3cinput name\x3d"googleAccessToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(f)+'"\x3e\x3cinput name\x3d"googleRefreshToken" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(e)+'"\x3e\x3cinput name\x3d"email" type\x3d"hidden" value\x3d"'+soy.$$escapeHtmlAttribute(c)+'"\x3e\x3c/form\x3e');c=$(c.toString());$("body").append(c);c.submit()}else Z(a,rb(a.j,c))})}
function mc(a,b){var c=a.Ca.width();a.Ca.width(c).toggleClass("socialAuth__alerts--visible",!0);b={type:"DANGER",message:soydata.VERY_UNSAFE.ordainSanitizedHtml(b),o:"socialAuth__alert",i:!1,small:!0};z(!(b.global^0),"$globalContainer is required for global alerts");switch(b.type){case "SUCCESS":soy.asserts.assertType(b.message instanceof soydata.SanitizedHtml||b.message instanceof soydata.UnsanitizedText||goog.isString(b.message),"message",b.message,"soydata.SanitizedHtml");soy.asserts.assertType(null==
b.title||b.title instanceof soydata.SanitizedHtml||b.title instanceof soydata.UnsanitizedText||goog.isString(b.title),"title",b.title,"?soydata.SanitizedHtml|string|undefined");soy.asserts.assertType(null==b.o||b.o instanceof goog.soy.data.SanitizedContent||goog.isString(b.o),"classes",b.o,"null|string|undefined");soy.asserts.assertType(null==b.l||goog.isBoolean(b.l)||1===b.l||0===b.l,"dismissible",b.l,"boolean|null|undefined");soy.asserts.assertType(null==b.global||goog.isBoolean(b.global)||1===
b.global||0===b.global,"global",b.global,"boolean|null|undefined");soy.asserts.assertType(null==b.i||goog.isBoolean(b.i)||1===b.i||0===b.i,"withIcon",b.i,"boolean|null|undefined");soy.asserts.assertType(null==b.small||goog.isBoolean(b.small)||1===b.small||0===b.small,"small",b.small,"boolean|null|undefined");b=soydata.VERY_UNSAFE.ordainSanitizedHtml(cc(soy.$$assignDefaults({X:"feedbackAlert--success",icon:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks(""+soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M10,0 C15.52,0 20,4.48 20,10 C20,15.52 15.52,20 10,20 C4.48,20 0,15.52 0,10 C0,4.48 4.48,0 10,0 Z M10,1.33333333 C5.21637967,1.33333333 1.33333333,5.21637967 1.33333333,10 C1.33333333,14.7836203 5.21637967,18.6666667 10,18.6666667 C14.7836203,18.6666667 18.6666667,14.7836203 18.6666667,10 C18.6666667,5.21637967 14.7836203,1.33333333 10,1.33333333 Z M6,10 L5,11 L8,14 L15,7 L14,6 L8,12 L6,10 Z" transform\x3d"translate(2,2)"/\x3e\x3c/svg\x3e'))},
b)));break;case "INFO":soy.asserts.assertType(b.message instanceof soydata.SanitizedHtml||b.message instanceof soydata.UnsanitizedText||goog.isString(b.message),"message",b.message,"soydata.SanitizedHtml");soy.asserts.assertType(null==b.title||b.title instanceof soydata.SanitizedHtml||b.title instanceof soydata.UnsanitizedText||goog.isString(b.title),"title",b.title,"?soydata.SanitizedHtml|string|undefined");soy.asserts.assertType(null==b.o||b.o instanceof goog.soy.data.SanitizedContent||goog.isString(b.o),
"classes",b.o,"null|string|undefined");soy.asserts.assertType(null==b.l||goog.isBoolean(b.l)||1===b.l||0===b.l,"dismissible",b.l,"boolean|null|undefined");soy.asserts.assertType(null==b.global||goog.isBoolean(b.global)||1===b.global||0===b.global,"global",b.global,"boolean|null|undefined");soy.asserts.assertType(null==b.i||goog.isBoolean(b.i)||1===b.i||0===b.i,"withIcon",b.i,"boolean|null|undefined");soy.asserts.assertType(null==b.small||goog.isBoolean(b.small)||1===b.small||0===b.small,"small",b.small,
"boolean|null|undefined");b=soydata.VERY_UNSAFE.ordainSanitizedHtml(cc(soy.$$assignDefaults({X:"feedbackAlert--info",icon:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks(""+soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M12,2 C17.52,2 22,6.48 22,12 C22,17.52 17.52,22 12,22 C6.48,22 2,17.52 2,12 C2,6.48 6.48,2 12,2 Z M12,3.33333333 C7.21637967,3.33333333 3.33333333,7.21637967 3.33333333,12 C3.33333333,16.7836203 7.21637967,20.6666667 12,20.6666667 C16.7836203,20.6666667 20.6666667,16.7836203 20.6666667,12 C20.6666667,7.21637967 16.7836203,3.33333333 12,3.33333333 Z M13,17 L11,17 L11,11 L13,11 L13,17 Z M13,9 L11,9 L11,7 L13,7 L13,9 Z"/\x3e\x3c/svg\x3e'))},
b)));break;case "WARNING":soy.asserts.assertType(b.message instanceof soydata.SanitizedHtml||b.message instanceof soydata.UnsanitizedText||goog.isString(b.message),"message",b.message,"soydata.SanitizedHtml");soy.asserts.assertType(null==b.title||b.title instanceof soydata.SanitizedHtml||b.title instanceof soydata.UnsanitizedText||goog.isString(b.title),"title",b.title,"?soydata.SanitizedHtml|string|undefined");soy.asserts.assertType(null==b.o||b.o instanceof goog.soy.data.SanitizedContent||goog.isString(b.o),
"classes",b.o,"null|string|undefined");soy.asserts.assertType(null==b.l||goog.isBoolean(b.l)||1===b.l||0===b.l,"dismissible",b.l,"boolean|null|undefined");soy.asserts.assertType(null==b.global||goog.isBoolean(b.global)||1===b.global||0===b.global,"global",b.global,"boolean|null|undefined");soy.asserts.assertType(null==b.i||goog.isBoolean(b.i)||1===b.i||0===b.i,"withIcon",b.i,"boolean|null|undefined");soy.asserts.assertType(null==b.small||goog.isBoolean(b.small)||1===b.small||0===b.small,"small",b.small,
"boolean|null|undefined");b=soydata.VERY_UNSAFE.ordainSanitizedHtml(cc(soy.$$assignDefaults({X:"feedbackAlert--warning",icon:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks(""+dc())},b)));break;case "DANGER":soy.asserts.assertType(b.message instanceof soydata.SanitizedHtml||b.message instanceof soydata.UnsanitizedText||goog.isString(b.message),"message",b.message,"soydata.SanitizedHtml");soy.asserts.assertType(null==b.title||b.title instanceof soydata.SanitizedHtml||b.title instanceof soydata.UnsanitizedText||
goog.isString(b.title),"title",b.title,"?soydata.SanitizedHtml|string|undefined");soy.asserts.assertType(null==b.o||b.o instanceof goog.soy.data.SanitizedContent||goog.isString(b.o),"classes",b.o,"null|string|undefined");soy.asserts.assertType(null==b.l||goog.isBoolean(b.l)||1===b.l||0===b.l,"dismissible",b.l,"boolean|null|undefined");soy.asserts.assertType(null==b.global||goog.isBoolean(b.global)||1===b.global||0===b.global,"global",b.global,"boolean|null|undefined");soy.asserts.assertType(null==
b.i||goog.isBoolean(b.i)||1===b.i||0===b.i,"withIcon",b.i,"boolean|null|undefined");soy.asserts.assertType(null==b.small||goog.isBoolean(b.small)||1===b.small||0===b.small,"small",b.small,"boolean|null|undefined");b=soydata.VERY_UNSAFE.ordainSanitizedHtml(cc(soy.$$assignDefaults({X:"feedbackAlert--danger",icon:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks(""+dc())},b)));break;default:throw Error("unknown AlertView.Type: "+b.type);}b=$(b.toString());z(b.hasClass("feedbackAlert"),'$el must have "feedbackAlert" in its classList');
z(!b.hasClass("feedbackAlert--global")||!1,"$globalContainer must only be used with global alerts");(new ec(b,void 0)).$el.appendTo(a.Ca)}function Z(a,b){a.$(".js-socialAuth__error").text(b).addClass("socialAuth__error--show");kc(a.$(".js-socialAuth__facebookButton"));kc(a.$(".js-socialAuth__googleButton"))}function lc(a){a.$(".js-socialLogin__error").removeClass("socialAuth__error--show")}var pc="loginAndSignup";$(function(){var a=new J(window.httpServiceConfig);if(!window.cmsg)throw Error("window['cmsg'] isn't defined");var b=new Sa,c=Ma(),d=window.signupConfig,d=d?{ja:C.required("pageVariant",d)}:{ja:""},e=null;try{if(window.localStorage)e=new T(window.localStorage,void 0);else throw Error("ClientStore: localStorage is not defined on window, likely an unsupported browser");}catch(h){}var f=new N({config:new qb,K:a,Sa:new fb(a)}),a=new yb({config:Lb(),K:a,aa:e}),e=$(".js-strengthChecker__input");b.g||(b.g=
new Va(b.config));var g=new V({pb:na,u:e,g:b.g,Ra:.75,ua:$(".js-strengthChecker__userInput")});g.render();g.insert($(".form__inputContainer--last"));(window.hasOwnProperty("zxcvbn")?P.resolve():P.resolve($.ajax({dataType:"script",cache:!0,url:"https://static.canva.com/static/lib/zxcvbn-4.2.0.min.js"})).return()).then(function(){g.zxcvbn=window.zxcvbn});(new Zb({el:".js-signupForm",analytics:c,j:Ta(b),ta:g,ja:d.ja})).start();(new gc({el:".js-signupForm__socialAuth",da:f,qa:a,j:Ta(b),mode:pc,eb:ka})).start();(function(){$(".js-signupForm .js-socialAuth__facebookButton").click(function(){Da(c,
{auth_mode:"facebook"})});$(".js-signupForm .js-socialAuth__googleButton").click(function(){Da(c,{authmode:"google"})});$(".js-signupForm__buttonEmail").click(function(){Da(c,{authmode:"email"})})})()});})();
